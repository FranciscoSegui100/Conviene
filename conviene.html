<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Conveniencia Chile-Arg</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #2A7B9B 0%, #57C785 50%, #EDDD53 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: sans-serif;
        }
        
        .card-calculadora {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            max-width: 500px;
            width: 90%;
        }

        .btn-calcular {
            background-color: #2A7B9B;
            color: white;
            font-weight: bold;
            width: 100%;
        }
        
        .btn-calcular:hover {
            background-color: #1f5c75;
            color: white;
        }

        .resultado-texto {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

    <div class="card-calculadora">
        <h3 class="text-center mb-4 text-dark">Conversor de Precios</h3>
        
        <div class="mb-3">
            <label for="precioCLP" class="form-label">Precio en Pesos Chilenos (CLP)</label>
            <input type="number" class="form-control form-control-lg text-center" id="precioCLP" placeholder="Ej: 15000">
        </div>

        <button type="button" class="btn btn-calcular btn-lg mb-4" id="calcular">CALCULAR</button>
        
        <div id="tabla"></div>
    </div>

    <script>
        // CONSTANTES (Actualizar según cotización del día)
        const TASA_USD_CHILE = 915;      // 1 USD = X CLP
        const TASA_USD_ARG_BLUE = 1455;  // 1 USD = X ARS (Blue/Tarjeta)
        const FACTOR_DIRECTO = 1.57;     // Cambio directo casas de cambio

        const botonCalcular = document.getElementById("calcular");
        const tabla = document.getElementById("tabla");

        botonCalcular.addEventListener("click", function(){
            const inputVal = document.getElementById("precioCLP").value;
            
            // Validación simple
            if(inputVal === "" || inputVal < 0) {
                alert("Por favor ingresa un precio válido");
                return;
            }

            const precioEnCLP = parseFloat(inputVal);

            // 1. Calcular precio en Dólares (NO usar parseInt aquí, o pierdes los decimales)
            const precioUSD = precioEnCLP / TASA_USD_CHILE;

            // 2. Calcular precio en Argentinos usando el dólar como puente
            const precioEnArgViaUSD = precioUSD * TASA_USD_ARG_BLUE;

            // 3. Calcular precio directo (Casas de cambio / Arbitraje)
            const precioCLPaARS = precioEnCLP * FACTOR_DIRECTO;

            // Renderizar tabla
            tabla.innerHTML = `
                <table class="table table-hover table-bordered text-center">
                    <thead class="table-dark">
                        <tr>
                            <th colspan="2">Resultados</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row" class="text-start">Original (CLP)</th>
                            <td>$ ${precioEnCLP.toLocaleString('es-CL')}</td>
                        </tr>   
                        <tr>
                            <th scope="row" class="text-start">Costo en USD (Chile)</th>
                            <td class="fw-bold text-success">US$ ${precioUSD.toFixed(2)}</td>
                        </tr>
                        <tr class="table-warning">
                            <th scope="row" class="text-start">En ARS (Cambio Directo) <br></th>
                            <td class="fw-bold fs-5">$  ${Math.ceil(precioCLPaARS).toLocaleString('es-AR')}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="alert alert-info mt-2 text-center" style="font-size: 0.8rem;">
                    Cotización usada: 1 USD = ${TASA_USD_CHILE} CLP
                </div>
            `;
        });
    </script>
</body>
</html>
